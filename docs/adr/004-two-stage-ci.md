# ADR-004: 二段階CIによる品質管理

## ステータス

採用

## コンテキスト

ユーザーの要望：
- lefthookによるcommit, push時の二段階ciによる品質管理
- DevOpsを体現するために必要なものをすべて整える

背景と課題：
- AI agentにおいても開発速度と品質チェックを両立するための施策
- 従来のリモートCI/CDではなく、ローカル上で同等のことを走らせることで高速にサイクルを回す
- 二段階である理由：コミット単位!=正常動作
- DevOpsで最も重要なのは常にpushされた最新ブランチが壊れていないこと
- 適切なフォーマットやリント、テストのパス及びカバレッジが適切で、不正のない綺麗な状態をキープし続ける

## 決定

実行タイミング：
- 実行時間のチェックはなく、その段階で確認するのが適切であるかどうかだけを基準とする
- commit時：ブロックとしての可読性重視
- push時：すべてのテストがパスする必要がある

運用ルール：
- 緊急時のスキップ、バイパスは一切許可しない
- 常にCIはパスすることを求める
- 許可なくCIを変更することも許さない

## 選択肢

[検討していない]

## 結果

[実装後に記載予定] 